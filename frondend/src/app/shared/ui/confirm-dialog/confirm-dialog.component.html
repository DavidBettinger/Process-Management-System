@if (dialog(); as current) {
  <div class="fixed inset-0 z-50 grid place-items-center bg-slate-900/50 p-4" (click)="handleBackdrop()">
    <div
      [class]="panelClass(current)"
      role="dialog"
      aria-modal="true"
      (click)="$event.stopPropagation()"
    >
      <h3 class="text-lg font-semibold text-slate-900">{{ current.title }}</h3>
      @if (current.kind === 'confirm') {
        <p class="mt-2 text-sm text-slate-600">{{ current.message }}</p>
        <div class="mt-6 flex flex-wrap justify-end gap-3">
          <button appTwButton="ghost" size="sm" type="button" (click)="cancel()">
            {{ current.cancelLabel ?? 'Abbrechen' }}
          </button>
          <button
            [appTwButton]="current.destructive ? 'danger' : 'primary'"
            size="sm"
            type="button"
            (click)="confirm()"
          >
            {{ current.confirmLabel ?? 'Bestaetigen' }}
          </button>
        </div>
      } @else {
        <div class="mt-4">
          <ng-container [ngTemplateOutlet]="current.template" [ngTemplateOutletContext]="current.context"></ng-container>
        </div>
      }
    </div>
  </div>
}
