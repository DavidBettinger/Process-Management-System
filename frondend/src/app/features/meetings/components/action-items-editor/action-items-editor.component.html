<section class="action-items">
  <header class="action-items-header">
    <div>
      <h3>Aufgabenpunkte</h3>
      <p>Erstelle Aufgaben, die aus dem Termin entstehen.</p>
    </div>
    <button class="ghost-button" type="button" (click)="addItem()">Aufgabenpunkt hinzufuegen</button>
  </header>

  <div class="empty" *ngIf="items.length === 0">
    <p>Noch keine Aufgabenpunkte.</p>
  </div>

  <div class="item" *ngFor="let item of items; let i = index; trackBy: trackByKey">
    <div class="item-meta">
      <span class="item-key">Key: {{ item.key }}</span>
      <button class="ghost-button" type="button" (click)="removeItem(i)">Entfernen</button>
    </div>
    <div class="item-fields">
      <label>
        Titel
        <input
          type="text"
          [ngModel]="item.title"
          (ngModelChange)="updateField(i, 'title', $event)"
          [ngModelOptions]="{ standalone: true }"
          placeholder="z.B. Konzeptentwurf erstellen"
        />
      </label>
      <label>
        Verantwortlich (optional)
        <input
          type="text"
          [ngModel]="item.assigneeId"
          (ngModelChange)="updateField(i, 'assigneeId', $event)"
          [ngModelOptions]="{ standalone: true }"
          placeholder="z.B. u-201"
        />
      </label>
      <label>
        Faellig am (optional)
        <input
          type="date"
          [ngModel]="item.dueDate"
          (ngModelChange)="updateField(i, 'dueDate', $event)"
          [ngModelOptions]="{ standalone: true }"
        />
      </label>
    </div>
  </div>
</section>
