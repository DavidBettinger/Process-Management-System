<section class="form-panel">
  <header>
    <p class="eyebrow">Kitas</p>
    <h2>Neue Kita anlegen</h2>
    <p class="subtitle">Verbinde die Kita mit einem Standort, damit Prozesse korrekt zugeordnet sind.</p>
  </header>

  <form class="form" [formGroup]="form" (ngSubmit)="submit()">
    <label>
      Name der Kita
      <input type="text" formControlName="name" placeholder="z.B. Kita Sonnenblume" />
      @if (isInvalid('name')) {
        <span class="field-error">{{ requiredMessage('Name der Kita') }}</span>
      }
    </label>

    <label>
      Standort
      <select formControlName="locationId">
        <option value="">Bitte waehlen</option>
        @for (location of locations; track location.id) {
          <option [value]="location.id">
            {{ location.label }} Â· {{ location.address.city }}
          </option>
        }
      </select>
      @if (isInvalid('locationId')) {
        <span class="field-error">{{ requiredMessage('Standort') }}</span>
      }
    </label>

    @if (locations.length === 0) {
      <p class="hint">
        Es sind noch keine Standorte vorhanden. Bitte zuerst einen Standort anlegen.
      </p>
    }

    <a class="link" routerLink="/locations">Neuen Standort anlegen</a>

    <button class="primary-button" type="submit" [disabled]="isSubmitting">Kita speichern</button>
  </form>
</section>
