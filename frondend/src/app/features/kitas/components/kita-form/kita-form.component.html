<app-tw-card [className]="'space-y-5'">
  <header class="space-y-2">
    <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Kitas</p>
    <h2 class="text-xl font-semibold text-slate-900">Neue Kita anlegen</h2>
    <p class="text-sm text-slate-600">
      Verbinde die Kita mit einem Standort, damit Prozesse korrekt zugeordnet sind.
    </p>
  </header>

  <form class="space-y-4" [formGroup]="form" (ngSubmit)="submit()">
    <app-tw-field
      label="Name der Kita"
      forId="kita-name"
      [required]="true"
      [error]="isInvalid('name') ? requiredMessage('Name der Kita') : null"
    >
      <input
        id="kita-name"
        type="text"
        formControlName="name"
        placeholder="z.B. Kita Sonnenblume"
        class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-400 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
      />
    </app-tw-field>

    <app-tw-field
      label="Standort"
      forId="kita-location"
      [required]="true"
      [error]="isInvalid('locationId') ? requiredMessage('Standort') : null"
    >
      <select
        id="kita-location"
        formControlName="locationId"
        class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 focus:border-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-200"
      >
        <option value="">Bitte waehlen</option>
        @for (location of locations; track location.id) {
          <option [value]="location.id">
            {{ location.label }} Â· {{ location.address.city }}
          </option>
        }
      </select>
    </app-tw-field>

    @if (locations.length === 0) {
      <p class="text-xs text-slate-500">
        Es sind noch keine Standorte vorhanden. Bitte zuerst einen Standort anlegen.
      </p>
    }

    <a appTwButton="ghost" size="sm" routerLink="/locations">Neuen Standort anlegen</a>

    <button appTwButton="primary" type="submit" [disabled]="isSubmitting">Kita speichern</button>
  </form>
</app-tw-card>
